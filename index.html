<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ë””ì§€í„¸ ë°¸ëŸ°ìŠ¤ Â· Vanilla JS</title>
  <style>
    :root{
      --mint-50:#f0fffb; --mint-100:#d9fff6; --mint-200:#bdf5ea; --mint-300:#89e7d6; --mint-400:#48d2bd; --mint-500:#19b7a1;
      --blue-50:#eef6ff; --blue-100:#d8ebff; --blue-300:#7ab7ff; --blue-400:#4b9dff; --blue-600:#2563eb;
      --gray-50:#f9fafb; --gray-100:#f3f4f6; --gray-200:#e5e7eb; --gray-400:#9ca3af; --gray-600:#4b5563; --gray-800:#1f2937;
      --radius-xl:1.25rem; --radius-lg:0.875rem; --shadow:0 12px 28px rgba(16,24,40,.08);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Apple SD Gothic Neo,ë§‘ì€ ê³ ë”•,Apple Color Emoji,Noto Color Emoji,sans-serif;line-height:1.5;background:linear-gradient(180deg,var(--mint-50),#fff)}
    .app{max-width:420px;margin:0 auto;min-height:100svh;display:flex;flex-direction:column}
    header{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;color:#fff;background:linear-gradient(90deg,var(--blue-400),var(--mint-400));border-bottom-left-radius:1rem;border-bottom-right-radius:1rem;box-shadow:0 8px 24px rgba(37,99,235,.18)}
    header h1{margin:0;font-size:20px}
    header .usage{font-size:12px;opacity:.95}
    main{flex:1;overflow:auto;padding:16px}
    .card{background:#fff;border:1px solid var(--gray-200);border-radius:var(--radius-xl);box-shadow:var(--shadow)}
    .pad{padding:18px}
    .center{text-align:center}
    .muted{color:var(--gray-600);font-size:14px}
    .title{font-weight:800;color:var(--gray-800)}
    .btn{appearance:none;border:0;padding:10px 14px;border-radius:12px;font-weight:700;cursor:pointer}
    .btn-primary{background:linear-gradient(90deg,var(--blue-400),var(--mint-400));color:#fff;box-shadow:0 8px 18px rgba(37,99,235,.25)}
    .btn-plain{background:#f3f7ff;color:#1e3a8a}
    .row{display:flex;gap:10px;align-items:center}
    .row-wrap{display:flex;flex-wrap:wrap;gap:12px}
    .field{width:100%;padding:10px 12px;border:2px solid var(--mint-200);border-radius:12px}
    .tag{display:inline-flex;align-items:center;gap:6px;background:var(--mint-50);border:1px solid var(--mint-200);color:#0f766e;padding:6px 10px;border-radius:999px}
    .badge{display:inline-flex;align-items:center;gap:6px;background:#f0fdf4;color:#16a34a;border:1px solid #bbf7d0;padding:6px 10px;border-radius:12px}
    .list{margin:0;padding-left:18px}
    .list li{margin:6px 0;color:var(--gray-600)}

    /* Home */
    .home-emoji{width:88px;height:88px;border-radius:999px;background:linear-gradient(90deg,var(--blue-400),var(--mint-400));display:flex;align-items:center;justify-content:center;color:#fff;box-shadow:0 10px 28px rgba(16,185,129,.28);margin:0 auto 10px}
    .usage-big{font-family:ui-monospace,Menlo,Consolas,monospace;font-size:34px;color:#0ea5a4}

    /* Stretch guide cards */
    .guide-grid{display:grid;grid-template-columns:1fr;gap:12px}
    .guide{border:2px solid var(--mint-200);border-radius:18px}
    .guide h3{margin:0 0 6px;color:var(--blue-600)}

    /* Chat */
    .chat-box{height:240px;overflow:auto;background:var(--gray-50);border:1px solid var(--gray-200);border-radius:16px;padding:10px;box-shadow:inset 0 1px 6px rgba(0,0,0,.04)}
    .bubble{display:inline-block;padding:8px 12px;border-radius:18px;margin:4px 0}
    .from-user{background:var(--blue-400);color:#fff}
    .from-bot{background:var(--mint-100);color:#065f46}
    .right{text-align:right}

    /* Pomodoro */
    .circle-wrap{position:relative;width:220px;height:220px;margin:0 auto 10px}
    .circle-wrap svg{position:absolute;inset:0;transform:rotate(-90deg)}
    .circle-time{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}

    /* Bottom nav */
    nav{position:sticky;bottom:0;background:#fff;border-top:1px solid var(--gray-200);padding:8px 6px;display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
    nav button{background:#fff;border:0;border-radius:12px;padding:8px 6px;color:var(--gray-600);font-weight:700}
    nav button.active{background:var(--mint-50);border:1px solid var(--mint-200);color:#0f766e}

    @media (min-width:480px){ main{padding:22px} }
  </style>
</head>
<body>
  <div class="app" id="app">
    <header>
      <h1>ë””ì§€í„¸ ë°¸ëŸ°ìŠ¤</h1>
      <span class="usage" id="usageHeader">â± 0s</span>
    </header>

    <main>
      <!-- HOME -->
      <section id="page-home" class="page">
        <div class="center" style="margin:6px 0 14px">
          <div class="home-emoji">ğŸŒ±</div>
          <h2 class="title" style="margin:6px 0">ì˜¤ëŠ˜ ì‚¬ìš©ì‹œê°„</h2>
          <div class="usage-big" id="usageBig">0s</div>
          <p class="muted">ë””ì§€í„¸ ë°¸ëŸ°ìŠ¤ë¡œ ê±´ê°•í•œ í•˜ë£¨ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš” ğŸ’«</p>
        </div>
      </section>

      <!-- ì•ŒëŒ ì„¤ì • -->
      <section id="page-stretchAlarm" class="page" hidden>
        <div class="card pad">
          <h2 class="title" style="color:#0ea5a4;margin-bottom:10px">ìŠ¤íŠ¸ë ˆì¹­ ì•ŒëŒ ì„¤ì •</h2>
          <div class="row" style="margin-bottom:10px">
            <input id="alarmInput" type="time" class="field" style="flex:1" />
            <button id="addAlarmBtn" class="btn btn-primary">ì¶”ê°€</button>
          </div>
          <ul id="alarmList" class="list"></ul>
          <p id="noAlarm" class="muted" style="margin-top:6px">â° ì„¤ì •ëœ ì•ŒëŒì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>
      </section>

      <!-- ìŠ¤íŠ¸ë ˆì¹­ ê°€ì´ë“œ -->
      <section id="page-stretchGuide" class="page" hidden>
        <h2 class="title" style="color:#2563eb;margin:8px 0 12px">íš¨ê³¼ì ì¸ ìŠ¤íŠ¸ë ˆì¹­ ë°©ë²•</h2>
        <div class="guide-grid" id="guideGrid"></div>
      </section>

      <!-- í¬ëª¨ë„ë¡œ íƒ€ì´ë¨¸ -->
      <section id="page-pomodoro" class="page" hidden>
        <div class="center card pad">
          <h2 class="title" style="color:#0ea5a4;margin-bottom:10px">í¬ëª¨ë„ë¡œ íƒ€ì´ë¨¸</h2>
          <div class="circle-wrap">
            <svg width="220" height="220">
              <circle cx="110" cy="110" r="100" stroke="#e0f7fa" stroke-width="10" fill="none"></circle>
              <circle id="pomoArc" cx="110" cy="110" r="100" stroke="#3b82f6" stroke-width="12" fill="none" stroke-linecap="round"></circle>
            </svg>
            <div class="circle-time">
              <div id="pomoTime" style="font:700 24px ui-monospace,Menlo,Consolas,monospace;color:#2563eb">25:00</div>
              <div id="pomoPercent" class="muted" style="margin-top:4px">100%</div>
            </div>
          </div>
          <div class="row center" style="justify-content:center;margin:8px 0 10px">
            <input id="pomoMinutes" type="number" min="1" max="60" value="25" class="field" style="width:72px;text-align:center" />
            <span class="muted">ë¶„</span>
          </div>
          <div class="row center" style="justify-content:center">
            <button id="pomoToggle" class="btn btn-primary">ì‹œì‘</button>
            <button id="pomoReset" class="btn btn-plain">ì´ˆê¸°í™”</button>
          </div>
        </div>
      </section>

      <!-- AI ìƒë‹´ -->
      <section id="page-aiChat" class="page" hidden>
        <div class="pad">
          <h2 class="title" style="color:#2563eb;margin-bottom:8px">AI ì •ì‹  ìƒë‹´</h2>
          <div id="chatBox" class="chat-box card"></div>
          <div class="row" style="margin-top:10px">
            <input id="chatInput" type="text" class="field" placeholder="ì§€ê¸ˆ ê¸°ë¶„ì´ ì–´ë•Œìš”?" />
            <button id="chatSend" class="btn btn-primary">ì „ì†¡</button>
          </div>
        </div>
      </section>
    </main>

    <nav>
      <button data-page="home" class="active">ì•Œë¦¼íŒ</button>
      <button data-page="stretchGuide">ìŠ¤íŠ¸ë ˆì¹­</button>
      <button data-page="pomodoro">íƒ€ì´ë¨¸</button>
      <button data-page="stretchAlarm">ì•ŒëŒ</button>
      <button data-page="aiChat">ìƒë‹´</button>
    </nav>
  </div>

  <script>
    // ------- ìƒíƒœ -------
    const state = {
      activePage: 'home',
      usageTime: 0, // seconds
      alarms: [],
      chat: [],
      pomo: { minutes: 25, time: 25*60, running: false, interval: null }
    };

    // ------- ê³µí†µ DOM -------
    const usageHeader = document.getElementById('usageHeader');
    const usageBig = document.getElementById('usageBig');

    // ------- ì‚¬ìš©ì‹œê°„ íƒ€ì´ë¨¸ -------
    setInterval(() => { state.usageTime += 1; renderHeader(); if(state.activePage==='home') renderHome(); }, 1000);

    function formatTime(sec){
      const h = Math.floor(sec/3600), m = Math.floor((sec%3600)/60), s = sec%60;
      if(h>0) return `${h}h ${m}m ${s}s`;
      if(m>0) return `${m}m ${s}s`;
      return `${s}s`;
    }

    function renderHeader(){ usageHeader.textContent = `â± ${state.usageTime}s`; }
    function renderHome(){ usageBig.textContent = formatTime(state.usageTime); }

    // ------- ë„¤ë¹„ê²Œì´ì…˜ -------
    document.querySelectorAll('nav button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const page = btn.dataset.page;
        if(!page) return;
        state.activePage = page;
        document.querySelectorAll('nav button').forEach(b=>b.classList.toggle('active', b===btn));
        document.querySelectorAll('.page').forEach(sec=>sec.hidden = (sec.id !== `page-${page}`));
        // ì„¹ì…˜ë³„ ì´ˆê¸° ë Œë”
        if(page==='stretchGuide') renderStretchGuide();
        if(page==='stretchAlarm') renderAlarm();
        if(page==='aiChat') renderChat();
        if(page==='pomodoro') renderPomodoro(true);
        if(page==='home') renderHome();
      })
    });

    // ------- ì•ŒëŒ -------
    const alarmInput = document.getElementById('alarmInput');
    const addAlarmBtn = document.getElementById('addAlarmBtn');
    const alarmList = document.getElementById('alarmList');
    const noAlarm = document.getElementById('noAlarm');

    addAlarmBtn.addEventListener('click',()=>{
      if(!alarmInput.value) return;
      state.alarms.push(alarmInput.value);
      alert(`ìŠ¤íŠ¸ë ˆì¹­ ì•ŒëŒì´ ${alarmInput.value}ì— ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤.`);
      alarmInput.value='';
      renderAlarm();
    });

    function renderAlarm(){
      alarmList.innerHTML = '';
      if(state.alarms.length===0){ noAlarm.style.display='block'; return; }
      noAlarm.style.display='none';
      state.alarms.forEach((a, i)=>{
        const li=document.createElement('li');
        li.textContent = `â° ${a}`;
        alarmList.appendChild(li);
      })
    }

    // ------- ìŠ¤íŠ¸ë ˆì¹­ ê°€ì´ë“œ -------
    const stretches = {
      wrist:[
        'ì–‘ íŒ”ì„ ì•ìœ¼ë¡œ ì­‰ ë»—ê³  ì†ë°”ë‹¥ì„ ì•„ë˜ë¡œ í–¥í•˜ê²Œ í•©ë‹ˆë‹¤.',
        'í•œ ì†ìœ¼ë¡œ ë°˜ëŒ€ ì†ê°€ë½ì„ ì¡ì•„ ì²œì²œíˆ ëª¸ ìª½ìœ¼ë¡œ ë‹¹ê²¨ì¤ë‹ˆë‹¤.',
        'ì†ëª© ì•ˆìª½ ê·¼ìœ¡ì´ ëŠ˜ì–´ë‚˜ëŠ” ëŠë‚Œì´ ë“¤ë©´ 15ì´ˆê°„ ìœ ì§€í•©ë‹ˆë‹¤.',
        'ë°˜ëŒ€ ì†ë„ ë™ì¼í•˜ê²Œ ë°˜ë³µí•©ë‹ˆë‹¤.'
      ],
      neck:[
        'ë°”ë¥´ê²Œ ì•‰ì€ ìƒíƒœì—ì„œ ì–´ê¹¨ë¥¼ ë‚´ë¦¬ê³  ê³ ê°œë¥¼ ì²œì²œíˆ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê¸°ìš¸ì…ë‹ˆë‹¤.',
        'ì†ìœ¼ë¡œ ë¨¸ë¦¬ë¥¼ ì‚´ì§ ëˆŒëŸ¬ ëª© ì˜† ê·¼ìœ¡ì„ ìŠ¤íŠ¸ë ˆì¹­í•©ë‹ˆë‹¤.',
        '15ì´ˆ ìœ ì§€ í›„ ì™¼ìª½ë„ ë™ì¼í•˜ê²Œ ë°˜ë³µí•©ë‹ˆë‹¤.',
        'ë§ˆì§€ë§‰ìœ¼ë¡œ ê³ ê°œë¥¼ ì•ë’¤ë¡œ ì²œì²œíˆ ëŒë ¤ ê·¼ìœ¡ì„ í’€ì–´ì¤ë‹ˆë‹¤.'
      ],
      shoulder:[
        'í•œìª½ íŒ”ì„ ê°€ìŠ´ ì•ìœ¼ë¡œ ê°€ì ¸ì™€ ë°˜ëŒ€ì†ìœ¼ë¡œ íŒ”ê¿ˆì¹˜ë¥¼ ê°ì‹¸ì¤ë‹ˆë‹¤.',
        'íŒ”ì„ ëª¸ ìª½ìœ¼ë¡œ ì²œì²œíˆ ë‹¹ê¸°ë©° ì–´ê¹¨ ë’¤ìª½ ê·¼ìœ¡ì„ ìŠ¤íŠ¸ë ˆì¹­í•©ë‹ˆë‹¤.',
        '15ì´ˆê°„ ìœ ì§€ í›„ ë°˜ëŒ€ìª½ë„ ë°˜ë³µí•©ë‹ˆë‹¤.',
        'ëìœ¼ë¡œ ì–‘íŒ”ì„ ë’¤ë¡œ ê¹ì§€ ë¼ê³  ê°€ìŠ´ì„ ì—´ì–´ì¤ë‹ˆë‹¤.'
      ]
    };

    function renderStretchGuide(){
      const grid=document.getElementById('guideGrid');
      if(grid.dataset.rendered==='1') return; // 1íšŒë§Œ ìƒì„±
      const entries = [ ['ì†ëª© ìŠ¤íŠ¸ë ˆì¹­','wrist'], ['ëª© ìŠ¤íŠ¸ë ˆì¹­','neck'], ['ì–´ê¹¨ ìŠ¤íŠ¸ë ˆì¹­','shoulder'] ];
      entries.forEach(([label,key])=>{
        const card=document.createElement('div');
        card.className='guide card pad';
        const h=document.createElement('h3'); h.textContent=label; card.appendChild(h);
        const ul=document.createElement('ul'); ul.className='list';
        stretches[key].forEach(s=>{ const li=document.createElement('li'); li.textContent=s; ul.appendChild(li); })
        card.appendChild(ul);
        grid.appendChild(card);
      });
      grid.dataset.rendered='1';
    }

    // ------- ì±„íŒ… -------
    const chatBox = document.getElementById('chatBox');
    const chatInput = document.getElementById('chatInput');
    const chatSend = document.getElementById('chatSend');

    chatSend.addEventListener('click', sendMessage);
    chatInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') sendMessage(); });

    function sendMessage(){
      const txt = chatInput.value.trim();
      if(!txt) return;
      state.chat.push({from:'user',text:txt});
      chatInput.value='';
      renderChat();
      setTimeout(()=>{
        state.chat.push({from:'bot', text:'ì˜¤ëŠ˜ë„ ìˆ˜ê³ í–ˆì–´ìš” ğŸŒ¿ ë§ˆìŒì´ ë‹µë‹µí•  ë•ŒëŠ” ì ê¹ ì‹¬í˜¸í¡ì„ í•´ë³´ì„¸ìš”.'});
        renderChat();
      }, 700);
    }

    function renderChat(){
      chatBox.innerHTML='';
      state.chat.forEach(c=>{
        const wrap=document.createElement('div');
        wrap.className = c.from==='user' ? 'right' : '';
        const b=document.createElement('span');
        b.className = 'bubble ' + (c.from==='user' ? 'from-user' : 'from-bot');
        b.textContent = c.text;
        wrap.appendChild(b);
        chatBox.appendChild(wrap);
      });
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    // ------- í¬ëª¨ë„ë¡œ -------
    const pomoMinutes = document.getElementById('pomoMinutes');
    const pomoToggle = document.getElementById('pomoToggle');
    const pomoReset  = document.getElementById('pomoReset');
    const pomoTimeEl = document.getElementById('pomoTime');
    const pomoPercentEl = document.getElementById('pomoPercent');
    const pomoArc = document.getElementById('pomoArc');

    function setPomoMinutes(m){ state.pomo.minutes=m; state.pomo.time=m*60; updatePomoArc(); renderPomodoro(); }

    pomoMinutes.addEventListener('change',()=>{
      const val = Math.min(60, Math.max(1, Number(pomoMinutes.value||25)));
      pomoMinutes.value = val;
      setPomoMinutes(val);
    });

    pomoToggle.addEventListener('click',()=>{
      state.pomo.running = !state.pomo.running;
      if(state.pomo.running){
        pomoToggle.textContent='ì¼ì‹œì •ì§€';
        state.pomo.interval = setInterval(()=>{
          state.pomo.time = Math.max(0, state.pomo.time-1);
          renderPomodoro();
          if(state.pomo.time===0){ clearInterval(state.pomo.interval); state.pomo.running=false; pomoToggle.textContent='ì‹œì‘'; }
        },1000);
      }else{
        clearInterval(state.pomo.interval); pomoToggle.textContent='ì‹œì‘';
      }
    });

    pomoReset.addEventListener('click',()=>{ setPomoMinutes(state.pomo.minutes); if(state.pomo.running){ clearInterval(state.pomo.interval); state.pomo.running=false; pomoToggle.textContent='ì‹œì‘'; } });

    function updatePomoArc(){
      const r=100, c=2*Math.PI*r;
      const percent = state.pomo.time/(state.pomo.minutes*60);
      pomoArc.setAttribute('stroke-dasharray', c);
      pomoArc.setAttribute('stroke-dashoffset', c*(1-percent));
    }

    function renderPomodoro(skipArc){
      const m = Math.floor(state.pomo.time/60), s = state.pomo.time%60;
      const percent = Math.round((state.pomo.time/(state.pomo.minutes*60))*100);
      pomoTimeEl.textContent = `${m}:${String(s).padStart(2,'0')}`;
      pomoPercentEl.textContent = `${percent}%`;
      if(!skipArc) updatePomoArc();
    }

    // ì´ˆê¸° ë Œë”
    renderHeader(); renderHome(); renderStretchGuide(); renderAlarm(); renderChat(); renderPomodoro();
  </script>
</body>
</html>
